<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>

<div class = container>

<button type = "button" id = "start" class = "btn btn-primary">Start</button>
<div id = "timer"></div>
<div id = "questions"></div>
<div id = "correct"></div>
<div id = "answers"></div>


</div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">

// Need to create a function to pull questions and answers.

var questionValues = {
    Q1: {
        Question: "What Year was Nintendo founded?",
        Answers: {
            Ans0: '1889',
            Ans1: '1910',
            Ans2: '1951',
            Ans3: '1968',
            },
        CorrectAnswer: 0,
        RevealAns: "Nintendo was founded in 1889."
    },

    Q2: {
        Question: "What was the first product Nintendo made?",
        Answers: {
            Ans0: 'Nintendo Entertainment System',
            Ans1: 'Ultra Hand',
            Ans2: 'Playing Cards',
            Ans3: 'Love Tester'
            },
        CorrectAnswer: 2
    },

    Q3: {
        Question: "What do most people believe the word 'Nintendo' mean?",
        Answers: {
            Ans0: 'Seize the Day',
            Ans1: 'To the Wayward Sky',
            Ans2: 'Heir to the Sun',
            Ans3: 'Leave Luck to the Heavens',
            },
        CorrectAnswer: 3
    },

    Q4: {
        Question: "What was Nintendo's first portable console known as?",
        Answers: {
            Ans0: 'Gameboy',
            Ans1: 'Gamegear',
            Ans2: 'Game and Watch',
            Ans3: 'Famicon',
            },
        CorrectAnswer: 2
    },

    Q5: {
        Question: "What series did Miyamoto not direactly create?",
        Answers: {
            Ans0: 'Donkey Kong',
            Ans1: 'Pokemon',
            Ans2: 'Mario',
            Ans3: 'Pikmin',
        },
    CorrectAnswer: 1
    },

    Q6: {
        Question: "Counting all iterations, including the Gameboy Color, when did production of the Game Boy end?",
        Answers: {
            Ans0: '1999',
            Ans1: '2003',
            Ans2: '2000',
            Ans3: '1998',
        },
    CorrectAnswer: 1
    },

    Q7: {
        Question: "What was the first game that Miyamoto directed?",
        Answers: {
            Ans0: 'Donkey Kong',
            Ans1: 'Mario Brothers',
            Ans2: 'Legend of Zelda',
            Ans3: 'Game and Watch',
        },
    CorrectAnswer: 0,
    },
    
    Q8: {
        Question: "Who was the female that was kidnapped in the original Donkey Kong?",
        Answers: {
            Ans0: 'Daisy',
            Ans1: 'Peach',
            Ans2: 'Dixie',
            Ans3: 'Pauline',
        },
    CorrectAnswer: 3,
    },

    Q9: {
        Question: "What was the cancelled console that Nintendo and Sony collaborated on?",
        Answers: {
            Ans0: 'Sony CDI',
            Ans1: 'Satellaview',
            Ans2: 'SNES-CD',
            Ans3: '64DD',
        },
    CorrectAnswer: 2,
    },

    Q10: {
        Question: "What Nintendo franchise is believed to have been inspired by Alien?",
        Answers: {
            Ans0: 'Metroid',
            Ans1: 'Kid Icuras',
            Ans2: 'Pikmin',
            Ans3: 'Mother',
        },
    CorrectAnswer: 0,
    },
    
    
}

// setting global variables
var questionArray = ['Q1', 'Q2', 'Q3', 'Q4', 'Q5', 'Q6', 'Q7', 'Q8', 'Q9','Q10']
var score = 0;
var count = 0;
var timer = 5;
var interval;
var answerVal = null
var result = null


// setting the timer
function run() {
setTimeout(thirtySeconds, 1000*5);
clearInterval(interval);
interval = setInterval(thirtySeconds, 1000)
}

// setting the function to display timer
function thirtySeconds() {
timer--
$("#timer").html("<h1>" + timer + "</h1>")

if (timer === 0) {
    displayAnswer()
    }
}

// clears interval if time runs out
function stop() {
    clearInterval(interval)
    $("#timer").html("<h1>" + timer + "</h1>")
}

function populateQuestion() {
    run()
    answerVal = null

    let nextQuestion = questionArray[count]
    let selectedQuestion = questionValues[nextQuestion]

    let questionBox = $("<div id = 'testQuestions'>")
    let question = $("<h2 class = 'question'>").text(selectedQuestion.Question)  
    let ans0 = $("<button class = 'list-group-item list-group-item-action mb-3 listofAnswers' type = 0>").text(selectedQuestion.Answers.Ans0)
    let ans1 = $("<button class = 'list-group-item list-group-item-action mb-3 listofAnswers' type = 1>").text(selectedQuestion.Answers.Ans1)
    let ans2 = $("<button class = 'list-group-item list-group-item-action mb-3 listofAnswers' type = 2>").text(selectedQuestion.Answers.Ans2)
    let ans3 = $("<button class = 'list-group-item list-group-item-action mb-3 listofAnswers' type = 3>").text(selectedQuestion.Answers.Ans3)

    $(question).appendTo($(questionBox))
    $(ans0).appendTo($(questionBox))
    $(ans1).appendTo($(questionBox))
    $(ans2).appendTo($(questionBox))
    $(ans3).appendTo($(questionBox))

    $("#questions").append(questionBox)
}

// global click command for answers

$(document).on("click", "button.listofAnswers", function() {
    answerVal = parseInt($(this).attr('type'))
    displayAnswer()
})

// display answer based on what user chooses
function displayAnswer() {
    var nextQuestion = questionArray[count]
    var selectedQuestion = questionValues[nextQuestion]

    stop()
    $("#timer").hide()
    $("#questions").empty()

    count++

    if(timer === 0){
        var result = "Time's Up!"
    }

    else if(answerVal === selectedQuestion.CorrectAnswer){
        score++
        var result = "Correct"
    }

    else {
        var result = "Incorrect"
    }

    let answerBox = $("<div id = Answer>")
    let outcome = $("<h2 id = outcome class = text-center>").text(result)
    // let ansPic = $("<img id = ansPic class = mx-auto>").html("<img src =" )
    let ansDesc = $("<p id = ansDesc class = text-center>").text(selectedQuestion.RevealAns)
    let nextBtn = $("<button id = nextBtn class = btn btn-light text-danger text-center>").text("Next")

    $(outcome).appendTo(answerBox)
    $(ansDesc).appendTo(answerBox)
    $(nextBtn).appendTo(answerBox)

    $("#questions").append(answerBox)  

}

// ending and resetting the game
function gameOver() {
    result = null
    count = 0
    $("#questions").empty()
    let endofGame = $("<h2 id = final>").text("Thank you for playing. Your final score was " + score + " out of 10!")
    let startOver =  $("<button id = startOver class = btn btn-light text-danger text.center>").text("Play Again!")
    

    $("#questions").append(endofGame)
    $("#questions").append(startOver)
}


$(document).on("click", "#nextBtn", function() {
    result = null
    $("#questions").empty()
    timer = 5
    $("#timer").html("<h1>" + timer + "</h1>")

    if(count === questionArray.length) {
        gameOver()
    }

    else{
    populateQuestion()
    }
})


$(document).on("click", "#startOver", function(){
    score = 0
    timer = 30
    $("#questions").empty()
    $("#start").show()
})

// start and run game.
$("#start").on("click", function() {
$("#timer").html("<h1>" + timer + "</h1>")
$("#start").hide()
populateQuestion()
})






</script>
</html>